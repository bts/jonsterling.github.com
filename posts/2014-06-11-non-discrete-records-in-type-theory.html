<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="readability-verification" content="cG3MqZcEVveKZ6mnEFkePAL3Ug79Jxxp5Fn27CM7" />
<title>JS ⊢ Non-discrete Records in Type Theory</title>
<link rel="stylesheet" type="text/css" href="../css/screen.css" />
<link rel="stylesheet" type="text/css" href="../css/syntax.css" />
<link rel="stylesheet" type="text/css" href="../css/coqdoc.css" />
<style type="text/css">
    @import url(http://nmashton.ca/css/gloss-0.0.1.css);
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="http://nmashton.ca/js/gloss-0.0.1.js"></script>
<link rel="alternate" type="application/rss+xml" title="Jonathan Sterling" href="../rss.xml" />


<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<!--[if lte IE 7]>
  <script src="js/IE8.js" type="text/javascript"></script><![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" media="all" href="css/ie6.css"/><![endif]-->

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  showMathMenu: false,
  showProcessingMessages: false,
  messageStyle: "none",
  'HTML-CSS': {
    availableFonts: [],
    webFont: 'TeX',
  },
  TeX: {
    Macros: {
      gk: ["\\style{font-family:Junicode!important; font-size:1.3em;}{\\text{#1}}", 1]
    }
  }
});
</script>
</head>
<body>

<header>
<h1><a href="../index.html"><span class="title">Non-discrete Records in Type Theory.</span></a></h1>
</header>

<section class="post">
<article><p>In my <a href="http://www.jonmsterling.com/posts/2014-05-11-records-are-sheaves-of-types.html">recent post</a> I demonstrated a type-theoretic formulation of non-dependent record types as presheaves on a particular topological space <span class="math">\(X\)</span> of keys given an assignment <span class="math">\(El_X : X\to\mathbf{Type}\)</span>. Today, I’ll construct more interesting records by endowing the key space with a non-discrete topology.</p>
<!--more-->

<p>Recall that for a key space <span class="math">\(X\)</span> with the discrete topology, the presheaf <span class="math">\(\mathcal{R}\)</span> has as its values the products of all subsets of <span class="math">\(X\)</span>. So if <span class="math">\(X:\equiv\mathbf{2}\)</span>, then the stalk space <span class="math">\(\Sigma\mathcal{R}\)</span> is <span class="math">\((\mathbf{1} + El_X(0) + El_X(1) + \Pi_\mathbf{2}El_X)\)</span>. That is, the record could be empty, it could contain either field, or it could contain both fields.</p>
<p>But suppose that <span class="math">\(X:\equiv[0,1]\)</span> with the trivial (indiscrete) topology; then <span class="math">\(\Sigma\mathcal{R}\cong(\mathbf{1} + \Pi_\mathbf{2}El_X)\)</span>. That is, the record must contain either no fields, or all fields. A more interesting example arises when you consider the topology on the natural numbers which is given by making each open set contain all the numbers up to its maximum: <span class="math">\[
\mathcal{O}(\mathbb{N}_\leq) = \{\{\}, \{1\}, \{1,2\}, \{1,2,3\}, ...\}
\]</span> In this case, for a record to be valid, it must contain all fields preceding its highest field: <span class="math">\[
\textstyle\sum\mathcal{R}\cong \mathbf{1} + El_X(1) + \prod_\mathbf{2}El_X + \prod_\mathbf{3}El_X + ... +\prod_n El_X
\]</span></p>
<p>To give a more practical example, imagine a space <span class="math">\(A\)</span> of codes for biographical data: <span class="math">\[\begin{align}
A &amp;:\equiv \{ \mathsf{name}, \mathsf{employer}, \mathsf{salary} \}\\
El_A &amp;:\equiv \lambda.\{ \mathsf{name},\mathsf{employer}\mapsto \mathbf{String}; \mathsf{salary}\mapsto\mathbb{N}\}
\end{align}\]</span> It doesn’t make sense that someone could have a salary if they were unemployed. So we want to make the presence of the <span class="math">\(\mathsf{salary}\)</span> field entail the presence of the <span class="math">\(\mathsf{employer}\)</span> field. Observe that the following topology satisfies this constraint: <span class="math">\[
\mathcal{O}(A) = \{\{\}, \{\mathsf{name}\}, \{\mathsf{employer}\},\{\mathsf{name},\mathsf{employer}\}, \{\mathsf{employer},\mathsf{salary}\}, \{\mathsf{name},\mathsf{employer},\mathsf{salary}\}\}
\]</span> The topological interpretation gives us a very nice way to deal with situations where one field doesn’t have meaning lacking another field, etc.</p>
<p>In fact, I have made this idea formal in Coq by briefly <a href="https://gist.github.com/jonsterling/f00cfcc552c3587dfff2">extending</a> Andrej Bauer’s delightful tutorial implementation of topology with a definition of presheaves and <span class="math">\(\mathcal{R}\)</span>.</p></article>
<h1>Want to comment?</h1>
<p> I’m @jonsterling on <a href="http://www.twitter.com/jonsterling">Twitter</a>.


<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66625087);
    }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66625087ns.gif" /></p></noscript>

<a rel="me" href="http://twitter.com/jonsterling"></a>
<a rel="me" href="https://alpha.app.net/jonsterling"></a>
</body>
</html>

